# STUN/TURN Server Configuration

# Listening IP address
listening-ip=0.0.0.0

# External IP will be set dynamically in start.sh
# This is critical for NAT traversal
relay-ip=0.0.0.0

# STUN and TURN ports
listening-port=3478
tls-listening-port=5349

# Relay ports range - limited for Docker compatibility
min-port=49152
max-port=49200

# Enable verbose logging
verbose
log-file=/var/log/turnserver.log

# Realm for TURN server authentication (will be set in start.sh)
realm=chatapp

# Use fingerprints in TURN messages
fingerprint

# Use long-term credential mechanism
lt-cred-mech

# Static user credentials (will be set in start.sh from env vars)
# Default: user=turnuser:turnpassword

# Allow STUN requests
stun-only=false

# Enable TURN functionality
no-stun=false

# Disable TCP relay for better performance (UDP only)
no-tcp-relay

# Enable stats
web-admin
web-admin-ip=0.0.0.0
web-admin-port=8080

# Deny access to private IP ranges (security)
no-multicast-peers
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255

# Mobility support
mobility

# Disable older TLS versions for security
no-tlsv1
no-tlsv1_1

# Enable prometheus metrics
prometheus

# CLI access (for debugging)
cli-ip=127.0.0.1
cli-port=5766
cli-password=CHANGE_ME_CLI_PASSWORD

# Production optimizations
max-bps=1000000
total-quota=100
user-quota=10

# Certificate paths (for TLS support)
# Uncomment and set paths when you have SSL certificates:
# cert=/etc/letsencrypt/live/app.lab.joku.dev/fullchain.pem
# pkey=/etc/letsencrypt/live/app.lab.joku.dev/privkey.pem
