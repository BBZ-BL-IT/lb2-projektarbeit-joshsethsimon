# STUN/TURN Server Configuration - Production

# Listening IP address
listening-ip=0.0.0.0

# External IP address - will be set via environment or use relay-ip
relay-ip=0.0.0.0
# For production with public IP, set: external-ip=YOUR_PUBLIC_IP

# STUN and TURN ports
listening-port=3478
tls-listening-port=5349

# Relay ports range
min-port=49152
max-port=65535

# Enable verbose logging in production (can disable for performance)
verbose
log-file=/var/log/turnserver.log

# Realm for TURN server authentication
realm=app.lab.joku.dev

# Server name
server-name=turn.lab.joku.dev

# Use fingerprints in TURN messages
fingerprint

# Use long-term credential mechanism
lt-cred-mech

# Static user credentials
# IMPORTANT: Change these in production!
user=turnuser:CHANGE_ME_SECURE_PASSWORD

# For production, use time-limited credentials with shared secret
# Uncomment these and comment out the static user above:
# use-auth-secret
# static-auth-secret=YOUR_RANDOM_SECRET_KEY_HERE

# Allow STUN requests
stun-only=false

# Enable TURN functionality
no-stun=false

# Disable TCP relay for better performance (UDP only)
no-tcp-relay

# Enable stats
web-admin
web-admin-ip=0.0.0.0
web-admin-port=8080

# Deny access to private IP ranges (security)
no-multicast-peers
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255

# Mobility support
mobility

# Disable older TLS versions for security
no-tlsv1
no-tlsv1_1

# Enable prometheus metrics
prometheus

# CLI access (for debugging)
cli-ip=127.0.0.1
cli-port=5766
cli-password=CHANGE_ME_CLI_PASSWORD

# Production optimizations
max-bps=1000000
total-quota=100
user-quota=10

# Certificate paths (for TLS support)
# Uncomment and set paths when you have SSL certificates:
# cert=/etc/letsencrypt/live/app.lab.joku.dev/fullchain.pem
# pkey=/etc/letsencrypt/live/app.lab.joku.dev/privkey.pem
